<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vis Lokaties</title>

  <!-- Favicons & App Icons -->
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icon-180.png" />
  <link rel="icon" sizes="192x192" href="assets/img/icon-192.png" />
  <link rel="icon" sizes="512x512" href="assets/img/icon-512.png" />

  <!-- Thema -->
  <link id="theme" rel="stylesheet" href="assets/css/style-dark.css" />

  <!-- Leaflet & plug-ins -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

  <!-- Turf & OSM -->
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/osmtogeojson@3.0.0/osmtogeojson.min.js"></script>

  <!-- Modules -->
  <script type="module" src="assets/js/core.js"></script>
  <script type="module" src="assets/js/helpers.js"></script>
  <script type="module" src="assets/js/data.js"></script>
  <script type="module" src="assets/js/map.js"></script>
  <script type="module" src="assets/js/ui.js"></script>
  <script type="module" src="assets/js/weather.js"></script>
</head>

<body>
  <header>
    <div class="header-left">
      <img src="assets/img/logo.svg" alt="Vis Lokaties logo" height="32" />
      <h1>Vis Lokaties <small id="versionLabel">v0.0.0</small></h1>
    </div>

    <div class="toolbar-right">
      <select id="langSelect" title="Taal kiezen">
        <option value="nl">🇳🇱 NL</option>
        <option value="en">🇬🇧 EN</option>
      </select>
      <button id="btnTheme" title="Wissel thema">🌗</button>
      <button id="btnResetCache" title="Cache wissen">🧹</button>
      <button id="btnResetServer" title="Herstel serverdata">🔁</button>
      <button id="btnSaveHtml" title="Sla huidige pagina op">💾 HTML</button>
      <button id="btnSaveHtmlData" title="Sla HTML + data op">💾 +📊</button>
    </div>
  </header>

  <main>
    <div id="mapContainer"></div>

    <aside id="uiControls">
      <!-- Kaart / GPS -->
      <details open>
        <summary><img src="assets/img/icon-gps.png" height="16" /> Kaart / GPS</summary>
        <div class="group">
          <button id="btnTrackGPS"><img src="assets/img/icon-gps.png" height="14" /> Start GPS</button>
          <button id="btnStopGPS">⏹️ Stop GPS</button>
          <button id="btnCenter">🎯 Centreer</button>
        </div>
        <div id="gpsPanel">
          <p>Lat: <span id="gpsLat">–</span> Lon: <span id="gpsLon">–</span></p>
          <p>Snelheid: <span id="gpsSpeed">–</span> m/s – Acc: <span id="gpsAcc">–</span> m</p>
        </div>
        <div class="group">
          <button id="btnCluster"><img src="assets/img/icon-detect.png" height="14" /> Clustering</button>
          <button id="btnFixDrag">🧷 Drag fix</button>
          <button id="btnDetectWater"><img src="assets/img/icon-water.png" height="14" /> OSM Water</button>
        </div>
      </details>

      <!-- Data & Analyse -->
      <details>
        <summary><img src="assets/img/icon-heat.png" height="16" /> Data / Analyse</summary>
        <div class="group">
          <input type="file" id="csvFile" accept=".csv,.zip" />
          <button id="btnLoadCSV">📂 Import CSV/ZIP</button>
        </div>
        <div class="group">
          <button id="btnShowHeat">🔥 Heatmap</button>
          <button id="btnMakeContours">🌀 Contouren</button>
          <button id="btnClearContours">❌ Wissen</button>
        </div>
        <div class="group">
          <button id="btnDrawDistances">📏 Afstanden</button>
          <button id="btnDetectSelection"><img src="assets/img/icon-detect.png" height="14" /> Detectie</button>
        </div>
        <div class="group">
          <button id="btnAutoRigs">🤖 Auto Rigs</button>
          <button id="btnNormalizeDB">🧮 Normaliseer DB</button>
        </div>
        <div class="group">
          <button id="btnExportGeoJSON">🌐 GeoJSON</button>
          <button id="btnExportZIP">📦 ZIP</button>
        </div>
      </details>

      <!-- Weer & Wind -->
      <details>
        <summary><img src="assets/img/icon-wind.png" height="16" /> Weer / Wind</summary>
        <div class="group">
          <label>Datum <input type="date" id="wxDate" /></label>
          <label>Uur 
            <select id="wxHour">
              <option value="0">00</option>
              <option value="6">06</option>
              <option value="12">12</option>
              <option value="18">18</option>
            </select>
          </label>
          <label>Dens <input type="range" id="wxDensity" min="1" max="10" value="5" /></label>
        </div>
        <div class="group">
          <button id="btnWeatherLoad">🌡️ Laad weerdata</button>
          <button id="btnWindOverlay"><img src="assets/img/icon-wind.png" height="14" /> Wind overlay</button>
        </div>
      </details>

      <!-- Over / Changelog -->
      <details>
        <summary>ℹ️ Over / Changelog</summary>
        <div id="tab-changelog">Wordt geladen…</div>
      </details>

      <!-- Overzicht -->
      <details open>
        <summary><img src="assets/img/icon-fish.png" height="16" /> Overzicht (laatste 50 punten)</summary>
        <table id="overviewTable">
          <thead>
            <tr><th>Type</th><th>Naam</th><th>Lat</th><th>Lon</th><th>Waarde</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </details>
    </aside>
  </main>

  <footer>
    <span id="statusLine">Status: Initialiseren…</span>
    <span id="footerInfo">© 2025 Vis Lokaties</span>
  </footer>
</body>
</html>
